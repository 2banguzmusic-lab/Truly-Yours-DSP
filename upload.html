<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload | Truly Yours DSP</title>

<style>
body { background:#050008; color:white; font-family:Arial }
input,button { width:100%; padding:12px; margin-top:10px }
button { background:#ff2bd1; border:none; font-weight:bold; cursor:pointer }
</style>
</head>

<body>

<h1>Upload Your Music</h1>

<input type="file" id="musicFile" accept=".mp3">
<button onclick="uploadSong()">Upload Song</button>
<div id="uploadStatus">Waiting...</div>

<br>
<a href="dashboard.html" style="color:#ff2bd1;font-weight:bold">Go to Dashboard ➜</a>

<!-- ===== Firebase ===== -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
// === Firebase Config (Truly Yours DSP 2025) ===
const firebaseConfig = {
  apiKey: "AIzaSyB9b9me_xmEorNFSMPHsTiDP4u7Pc6jfA",
  authDomain: "truly-yours-dsp-2025.firebaseapp.com",
  projectId: "truly-yours-dsp-2025",
  storageBucket: "truly-yours-dsp-2025.firebasestorage.app",
  messagingSenderId: "369021987682",
  appId: "1:369021987682:web:dbe97e15e0b8fb8bc3bb09"
};

// INIT
firebase.initializeApp(firebaseConfig);
const storage = firebase.storage();

// === Upload Function ===
function uploadSong() {
  const fileInput = document.getElementById("musicFile");
  const status = document.getElementById("uploadStatus");

  if (!fileInput.files.length) {
    status.innerText = "Pick an MP3 first";
    return;
  }

  const file = fileInput.files[0];
  const filename = Date.now() + "-" + file.name;
  const path = "artists_audio/" + filename;

  status.innerText = "Uploading... 0%";

  const uploadTask = storage.ref(path).put(file);

  uploadTask.on("state_changed",
    (snap) => {
      const pct = Math.round((snap.bytesTransferred / snap.totalBytes) * 100);
      status.innerText = `Uploading... ${pct}%`;
    },
    (err) => {
      status.innerText = "❌ " + err.message;
    },
    () => {
      status.innerText = "✅ Upload complete!";
    }
  );
}
</script>

</body>
</html>
