<!DOCTYPE html>
<html>
<head>
<title>Dashboard | Truly Yours DSP</title>
<style>
body { background:#050008; color:white; font-family:Arial }
a { color:#ff2bd1;font-weight:bold }
li { margin:12px 0 }
button { background:#ff2bd1;border:none;padding:6px 12px;cursor:pointer }
</style>
</head>

<body>

<h1>Your Uploaded Songs</h1>
<ul id="songList">Loading...</ul>

<a href="upload.html">Upload More âžœ</a>

<script type="module">
import { app, storage } from "./firebase-init.js";
import { 
  ref, listAll, getDownloadURL 
} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-storage.js";

const songList = document.getElementById("songList");

async function loadSongs() {
  songList.innerHTML = "Loading... ðŸ”„";

  const folder = ref(storage, "artists_audio/");
  const files = await listAll(folder);

  if (!files.items.length) {
    songList.innerHTML = "<li>No uploads yet â€” drop one ðŸ”¥</li>";
    return;
  }

  songList.innerHTML = "";

  for (const fileRef of files.items) {
    const url = await getDownloadURL(fileRef);
    const name = fileRef.name.replace(/^\d+-/,"");
    const li = document.createElement("li");
    li.innerHTML = `
      ðŸŽµ <strong>${name}</strong><br>
      <audio controls src="${url}"></audio>
    `;
    songList.appendChild(li);
  }
}

loadSongs();
</script>

</body>
</html>
